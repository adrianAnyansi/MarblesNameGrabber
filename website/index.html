<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link rel="icon" href="website/marblesonstream.png" type="image/x-icon" />
        <title>Am I In Marbles??</title>
    </head>
    <link rel="stylesheet" type="text/css" href="website/site.css"/>
    <body>
        <div class="page trackingPage">
            <h2 class="big-title">Am I in</h2>
            <!-- <img src="website/doom-2016-right.png" id="name_img"> -->
            <h2 class="big-title" id="streamerName">BarbarousKing's</h2>
            <div id="last_title">
                <h2 class="big-title">Marbles?</h2>
                <div id="serverBox">
                    <div>
                        <span id="serverStatusIcon" class="unknown">⏺</span>
                        <span id="server_status">Getting server status</span>
                    </div>
                    <span id="viewers_visiting">Website viewers</span>
                    <span id="lag_time"></span>
                </div>
            </div>

            <br/>
            <br/>
            <br/>
            <div id="username_input_box">
                <input id="username_input" placeholder=" ">
                <p id="username_placeholder">Enter username</p>
                <!-- <p id="username_placeholder2">Enter username</p> -->
            </div>
            <div id="username_output_box">
                <p id="username_simple_out"></p> 
                <p id="username_recheck"></p>
                <p id="user_tracked">possible user(s)</p>
            </div>
            <br/>

            <p style="display:none" id="username_general"></p>

            <div style="position:relative">
                <!-- <p style="position:absolute">Image will be displayed here</p> -->
                <img id="userImg" class="hidden" src="">
            </div>

            <br/>
            <br/>
            <p>
                This website is not affliated with BarbarousKing or MarblesOnStream, it's a project by a viewer.
            </p>
        </div>

        <div class="page aboutPage">
            <h2 class="small-title">About</h2>

            <p class="aboutQuestion"><span>Q: </span>Wait, so what is this site?</p>

            <p>
                This is a fan site made to track entrants in Twitch.tv streamer BarbarousKing Marbles-On-Stream event.
            </p>

            <p class="aboutQuestion"><span>Q: </span> Hmm.. how does it work?</p>

            <p>
                Marbles-On-Stream doesn't have an API to find people in races, so this site does that.
                Short answer is that it's <b>watching the stream</b>, removes as much of the background as it can, 
                then sends the image to text recognition to extract the usernames.
            </p>
            <p><i>So Barb please don't obscure names during the initial scroll</i></p>
            <p>
                Both the background extract & text recognition are not perfect, so the site is not completely accurate.
                It uses binarization and OCR to do this.
            </p>

            <p class="aboutQuestion"><span>Q: </span> Ok but how accurate? Am I in or not?</p>

            <p>
                Testing shows it's about ~98% accurate and ~2.3s behind live. 
            </p>
            <p>
                The exact amount can vary depending on obscured names, bitrate, certain letters, etc.
                There's no way to know 100% because there can be situations where names are unreadable:
                i.e 
            </p>
            <!-- <ul>
                <li>Twitch chat not being moved early</li>
                <li>Marble names in world overlaping Username list</li>
                <li>Bitrate making names unreadable</li>
                <li>Other oversights in code</li>
            </ul> -->

            <p class="aboutQuestion"><span>Q: </span>So with all this work; you must know the secret of getting into marbles?</p>

            <p>
                Uhhhh... 
                So the short answer is:
                <ol>
                    <li>Be Early and chat <b>right</b> after the loading screen completes </li>
                    <li>Type <b>!play</b> or <b>!PLAY</b> or <b>!Play</b> or <b>!play #</b> <i>(# can be any single number)</i> </li>
                    <li>Hope the RNG gods smile on you!</li>
                </ol>
            </p>
            <p>
                The technical explaination is: your chat goes to the Twitch IRC servers which is then downloaded onto Barb's machine. However due to
                the massive amount of messages sent during Marbles, the messages no longer arrive in order. So generally your message will make it in,
                but when I have no clue <b>when</b> if it's based on lag to the streamer, ordered, random, etc. 
            </p>

            

            <p class="aboutQuestion"><span>Q: </span>Wait a secon- why not just read Barb's chat on screen then?</p>

            <p>
                <ul>
                    <li> Have you seen how tiny that is? Smaller letters will make it even more inaccurate.</li>
                    <li> Stream chat either gets removed/or moved to a random spot on screen </li>
                    <li> That chat scrolls so fast that even the computer will miss people. </li>
                </ul>
            </p>
            <p>
                Also I can't use Twitch chat as my order is different from Barb's.
            </p>

            <p class="aboutQuestion"><span>Q: </span>Alright so I found a bug. Who do I snitch to?</p>

            <p>
                Just say something on discord or in the #rats-nest. @MiloticMaster
            </p>
            <p>
                Thanks for using this! barbLove
            </p>
            <p>
                Improvements: Number of users is more accurate (now ±30 users)
                Fixed placeholder for user input.
                Username search is slightly more accurate.
            </p>
            <p>
                Improvements 0.2.2: Fixed bug with username search
                Increased avg accuracy to 98%
                Added lag from LIVE
            </p>
        </div>

        
        <div class="easter_egg">
            <img src="website/milotic.png"/>
            <p>I fixed it Vove, you happy?</p>
        </div>

    </body>
    <script type="text/javascript" src="website/client.js"></script>
</html>
